<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>NovaShield â€” JARVIS Edition</title>
  <link rel="stylesheet" href="/static/style.css" />
</head>
<body>
  <header>
    <div class="brand">
      <div class="ring"></div>
      <h1>NovaShield <span class="mini">JARVIS</span></h1>
      <div class="by">by niteas aka MrNova420</div>
    </div>
    <div class="actions">
      <button id="btn-refresh">Refresh</button>
      <button data-act="backup">Backup</button>
      <button data-act="version">Snapshot</button>
      <button data-act="restart_monitors">Restart Monitors</button>
    </div>
  </header>

  <nav class="tabs">
    <button data-tab="status" class="active">Status</button>
    <button data-tab="alerts">Alerts</button>
    <button data-tab="files">Files</button>
    <button data-tab="terminal">Terminal</button>
    <button data-tab="ai">Jarvis</button>
    <button data-tab="webgen">Web Builder</button>
    <button data-tab="config">Config</button>
    <button data-tab="admin">Admin</button>
  </nav>

  <main>
    <section id="tab-status" class="tab active">
      <section class="grid">
        <div class="card" id="card-cpu"><h2>CPU</h2><div class="value" id="cpu"></div></div>
        <div class="card" id="card-mem"><h2>Memory</h2><div class="value" id="mem"></div></div>
        <div class="card" id="card-disk"><h2>Disk</h2><div class="value" id="disk"></div></div>
        <div class="card" id="card-net"><h2>Network</h2><div class="value" id="net"></div></div>
        <div class="card" id="card-int"><h2>Integrity</h2><div class="value" id="int"></div></div>
        <div class="card" id="card-proc"><h2>Processes</h2><div class="value" id="proc"></div></div>
        <div class="card" id="card-user"><h2>Users</h2><div class="value" id="user"></div></div>
        <div class="card" id="card-svc"><h2>Services</h2><div class="value" id="svc"></div></div>
        <div class="card" id="card-meta"><h2>Meta</h2><div class="value" id="meta"></div></div>
      </section>
      <div class="panel">
        <h3>Monitors Control</h3>
        <div class="toggles">
          <button class="toggle" data-target="cpu">CPU</button>
          <button class="toggle" data-target="memory">Memory</button>
          <button class="toggle" data-target="disk">Disk</button>
          <button class="toggle" data-target="network">Network</button>
          <button class="toggle" data-target="integrity">Integrity</button>
          <button class="toggle" data-target="process">Process</button>
          <button class="toggle" data-target="userlogins">Users</button>
          <button class="toggle" data-target="services">Services</button>
          <button class="toggle" data-target="logs">Logs</button>
          <button class="toggle" data-target="scheduler">Scheduler</button>
        </div>
      </div>
    </section>

    <section id="tab-alerts" class="tab">
      <div class="panel">
        <h3>Alerts</h3>
        <ul id="alerts"></ul>
      </div>
    </section>

    <section id="tab-files" class="tab">
      <div class="panel">
        <h3>File Manager</h3>
        <div class="filebar">
          <input id="cwd" value="~/.novashield" />
          <button id="btn-list">List</button>
        </div>
        <div id="filelist"></div>
        <div id="viewer" class="panel" style="display:none; margin-top:10px;">
          <h3 id="viewer-title">Viewer</h3>
          <pre id="viewer-content" contenteditable="true" style="white-space:pre-wrap; overflow-x:auto;"></pre>
        </div>
        <div class="file-actions">
          <input id="newpath" placeholder="Path to create or save" />
          <button id="btn-mkdir">Mkdir</button>
          <button id="btn-save">Save Viewer -> Path</button>
          <button id="btn-delete">Delete</button>
          <button id="btn-rename">Rename</button>
          <button id="btn-move">Move</button>
        </div>
      </div>
    </section>

    <section id="tab-terminal" class="tab">
      <div class="panel">
        <h3>Web Terminal</h3>
        <div id="term" tabindex="0"></div>
        <div class="term-hint">Type here. Press Ctrl-C to interrupt. Idle timeout applies.</div>
        <div class="term-controls">
          <button id="term-connect">Connect</button>
          <button id="term-disconnect">Disconnect</button>
          <button id="term-clear">Clear</button>
        </div>
      </div>
    </section>

    <section id="tab-ai" class="tab">
      <div class="panel">
        <h3>Jarvis Assistant</h3>
        <div id="chat">
          <div id="chatlog"></div>
          <div class="chatbox">
            <input id="prompt" placeholder="Ask Jarvis... try: status, backup, IP" />
            <button id="send">Send</button>
          </div>
        </div>
      </div>
    </section>

    <section id="tab-webgen" class="tab">
      <div class="panel">
        <h3>Webpage Builder</h3>
        <div class="webgen-controls">
          <input id="wtitle" placeholder="Page title" />
          <textarea id="wcontent" placeholder="HTML content"></textarea>
          <div class="webgen-actions">
            <button id="wmake">Create Page</button>
            <button id="wedit">Edit Page</button>
            <button id="wdelete">Delete Page</button>
          </div>
        </div>
        <div id="wresult"></div>
        <div id="page-list">
          <h4>Existing Pages</h4>
          <div id="pages"></div>
        </div>
      </div>
    </section>

    <section id="tab-config" class="tab">
      <div class="panel">
        <h3>Configuration Editor</h3>
        <div class="config-controls">
          <button id="config-reload">Reload</button>
          <button id="config-save">Save Changes</button>
          <button id="config-validate">Validate YAML</button>
        </div>
        <textarea id="config-editor" placeholder="YAML configuration will load here..."></textarea>
        <div id="config-status"></div>
      </div>
    </section>

    <section id="tab-admin" class="tab">
      <div class="panel">
        <h3>Admin Panel</h3>
        <div class="admin-sections">
          <div class="admin-section">
            <h4>User Management</h4>
            <div class="user-controls">
              <input id="new-username" placeholder="Username" />
              <input id="new-password" type="password" placeholder="Password" />
              <button id="add-user">Add User</button>
            </div>
            <div id="user-list"></div>
          </div>
          <div class="admin-section">
            <h4>Backup & Restore</h4>
            <div class="backup-controls">
              <button id="create-backup">Create Backup</button>
              <button id="list-backups">List Backups</button>
              <input id="restore-file" placeholder="Backup filename to restore" />
              <button id="restore-backup">Restore</button>
            </div>
            <div id="backup-status"></div>
          </div>
          <div class="admin-section">
            <h4>Notifications Setup</h4>
            <div class="notification-controls">
              <h5>Email Settings</h5>
              <input id="email-server" placeholder="SMTP Server" />
              <input id="email-port" placeholder="Port" type="number" />
              <input id="email-user" placeholder="Username" />
              <input id="email-pass" type="password" placeholder="Password" />
              <button id="save-email">Save Email</button>
              
              <h5>Telegram Settings</h5>
              <input id="telegram-token" placeholder="Bot Token" />
              <input id="telegram-chat" placeholder="Chat ID" />
              <button id="save-telegram">Save Telegram</button>
              
              <h5>Discord Settings</h5>
              <input id="discord-webhook" placeholder="Webhook URL" />
              <button id="save-discord">Save Discord</button>
            </div>
          </div>
        </div>
      </div>
    </section>
  </main>

  <div id="login" class="login" style="display:none;">
    <div class="login-card">
      <h3><span class="ring"></span>Login Required</h3>
      <input id="li-user" placeholder="Username" autocomplete="username" />
      <input id="li-pass" placeholder="Password" type="password" autocomplete="current-password" />
      <input id="li-otp" placeholder="2FA Code (if enabled)" inputmode="numeric" pattern="[0-9]*" />
      <button id="li-btn">Sign in</button>
      <div id="li-msg" class="error-msg"></div>
      <div class="login-attempts" id="login-attempts"></div>
    </div>
  </div>

  <div id="loading" class="loading" style="display:none;">
    <div class="loading-spinner"></div>
    <div class="loading-text">Loading...</div>
  </div>

  <script src="/static/app.js"></script>
</body>
</html>
